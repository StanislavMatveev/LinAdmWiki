# Роль node_exporter_with_tls_install

## Описание

Данная роль устанавливает node_exporter версии 1.9.0. Установка происходит, за счет копирования бинарного файла и необходимых конфигов. Соответственно, для корректной работы должны быть все необходимые файлы описанные ниже. Так же, чтобы поменять версию node_exporter, нужно просто заменить бинарник. Роль добавляет на сервера для node_exporter пользователя prometheus.

Список файлов, необходимых для корректной работы:
- ca.crt - сертификат доверия, используется на сервере prometheus для доступа к node_exporter.
- node_exporter - бинарный файл node_exporter.
- node_exporter.crt - сертификат для node_exporter.
- node_exporter-key - ключ для node_exporter.
- web-config.yml - файл конфигурации с указанием пути до ключа и сертификата.

**Внимание!** Сертификат доверия, сертификат сервера и ключ сервера необходимо заменить на свои.

Список шаблонов, необходимых для корректной работы:
- node-exporter.service.j2 - файл юнита для node_exporter.

**Внимание!** Для корректной работы необходимо сохранить названия всех файлов.

## Переменные

*Переменные в каталоге defaults данной роли:*

- `node_exporter_port` - переменная для указания порта, на котором будет работать node_exporter. По умолчанию стоит дефолтный порт node_exporter - 9100. Данную переменную можно переопределить через group_vars.

*Переменные которые необходимо указать в файлах group_vars:*

- `prometheus_server` - IP-адрес сервера на котором установлен prometheus.

